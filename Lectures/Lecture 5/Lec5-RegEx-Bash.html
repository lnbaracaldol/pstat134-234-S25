<!DOCTYPE html>
<html lang="en"><head>
<script src="Lec5-RegEx-Bash_files/libs/clipboard/clipboard.min.js"></script>
<script src="Lec5-RegEx-Bash_files/libs/quarto-html/tabby.min.js"></script>
<script src="Lec5-RegEx-Bash_files/libs/quarto-html/popper.min.js"></script>
<script src="Lec5-RegEx-Bash_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="Lec5-RegEx-Bash_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Lec5-RegEx-Bash_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="Lec5-RegEx-Bash_files/libs/quarto-html/quarto-syntax-highlighting-de84f8d6bb715db06a919283c2d1e787.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.42">

  <title>Advanced Web Scraping: CSS Selectors, Dynamic Content, Bash &amp; Regex</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="Lec5-RegEx-Bash_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="Lec5-RegEx-Bash_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="Lec5-RegEx-Bash_files/libs/revealjs/dist/theme/quarto-8f3eebe07241f08526c91a7e9cbef8fd.css">
  <link rel="stylesheet" href="lec2.css">
  <link href="Lec5-RegEx-Bash_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="Lec5-RegEx-Bash_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="Lec5-RegEx-Bash_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="Lec5-RegEx-Bash_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Advanced Web Scraping: CSS Selectors, Dynamic Content, Bash &amp; Regex</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="overview" class="slide level2">
<h2>Overview</h2>
<ul>
<li class="fragment">Review: CSS Selectors for Scraping</li>
<li class="fragment">CSS Selector Cheatsheet</li>
<li class="fragment">Examples in R and Python</li>
<li class="fragment">Regular Expressions</li>
<li class="fragment">Bash for data manipulation</li>
<li class="fragment">Dynamic Websites: Chromote (R) &amp; Selenium (Python)</li>
</ul>
</section>
<section id="css-selectors-refresher" class="slide level2">
<h2>CSS Selectors Refresher</h2>
<p>CSS selectors are patterns used to select elements in HTML documents.</p>
<p>They are useful in web scraping to:</p>
<ul>
<li class="fragment">Identify nodes in the DOM</li>
<li class="fragment">Extract text, attributes, links, etc.</li>
</ul>
<p>Used by:</p>
<ul>
<li class="fragment"><code>html_elements()</code> and <code>html_element()</code> in R</li>
<li class="fragment"><code>.select()</code> and <code>.select_one()</code> in Python (BeautifulSoup)</li>
</ul>
</section>
<section id="common-css-selectors" class="slide level2">
<h2>Common CSS Selectors</h2>
<div style="font-size: 0.6em">
<table class="caption-top">
<colgroup>
<col style="width: 17%">
<col style="width: 55%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th>Selector</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>*</code></td>
<td>Universal selector, selects all elements</td>
<td><code>*</code></td>
</tr>
<tr class="even">
<td><code>tag</code></td>
<td>Select all tags of that type</td>
<td><code>p</code>, <code>div</code>, <code>h1</code></td>
</tr>
<tr class="odd">
<td><code>.class</code></td>
<td>Elements with a specific class</td>
<td><code>.price</code>, <code>.intro</code></td>
</tr>
<tr class="even">
<td><code>#id</code></td>
<td>Element with specific ID</td>
<td><code>#main</code>, <code>#firstName</code></td>
</tr>
<tr class="odd">
<td><code>tag1 tag2</code></td>
<td>Descendant selector: <code>tag2</code> inside <code>tag1</code></td>
<td><code>div p</code></td>
</tr>
<tr class="even">
<td><code>tag1, tag2</code></td>
<td>OR selector: matches both types</td>
<td><code>h1, h2</code></td>
</tr>
<tr class="odd">
<td><code>tag1.class</code></td>
<td>AND selector: element must match both tag and class</td>
<td><code>div.highlight</code></td>
</tr>
<tr class="even">
<td><code>tag1 &gt; tag2</code></td>
<td>Direct child selector</td>
<td><code>ul &gt; li</code></td>
</tr>
<tr class="odd">
<td><code>tag1 + tag2</code></td>
<td>Immediate sibling selector</td>
<td><code>h2 + p</code></td>
</tr>
<tr class="even">
<td><code>tag1 ~ tag2</code></td>
<td>General sibling selector</td>
<td><code>h2 ~ p</code></td>
</tr>
<tr class="odd">
<td><code>[attr]</code></td>
<td>Select elements with given attribute</td>
<td><code>img[src]</code>, <code>[target]</code></td>
</tr>
<tr class="even">
<td><code>[attr="val"]</code></td>
<td>Attribute equals value</td>
<td><code>a[href="https://..."]</code></td>
</tr>
<tr class="odd">
<td><code>[attr^="val"]</code></td>
<td>Attribute starts with value</td>
<td><code>a[href^="https"]</code></td>
</tr>
<tr class="even">
<td><code>[attr$="val"]</code></td>
<td>Attribute ends with value</td>
<td><code>a[href$=".pdf"]</code></td>
</tr>
<tr class="odd">
<td><code>[attr*="val"]</code></td>
<td>Attribute contains value</td>
<td><code>a[href*="w3schools"]</code></td>
</tr>
<tr class="even">
<td><code>[attr|="val"]</code></td>
<td>Attribute is val or starts with val-</td>
<td><code>[lang|="en"]</code></td>
</tr>
<tr class="odd">
<td><code>[attr~=val]</code></td>
<td>Attribute contains word</td>
<td><code>[title~="flower"]</code></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="infographic-guide-to-common-css-selectors" class="slide level2">
<h2>Infographic Guide to Common CSS Selectors</h2>

<img data-src="img/css-sel.png" class="r-stretch"></section>
<section id="advanced-css-selectors" class="slide level2">
<h2>Advanced CSS Selectors</h2>
<div style="font-size: 0.75em">
<table class="caption-top">
<colgroup>
<col style="width: 17%">
<col style="width: 55%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th>Selector</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>:first-child</code></td>
<td>Select first child of parent</td>
<td><code>li:first-child</code></td>
</tr>
<tr class="even">
<td><code>:last-child</code></td>
<td>Select last child of parent</td>
<td><code>p:last-child</code></td>
</tr>
<tr class="odd">
<td><code>:nth-child(n)</code></td>
<td>Select nth child</td>
<td><code>tr:nth-child(3)</code></td>
</tr>
<tr class="even">
<td><code>:nth-last-child(n)</code></td>
<td>Select nth from the end</td>
<td><code>li:nth-last-child(2)</code></td>
</tr>
<tr class="odd">
<td><code>:first-of-type</code></td>
<td>First element of its type in parent</td>
<td><code>p:first-of-type</code></td>
</tr>
<tr class="even">
<td><code>:last-of-type</code></td>
<td>Last element of its type in parent</td>
<td><code>p:last-of-type</code></td>
</tr>
<tr class="odd">
<td><code>:only-child</code></td>
<td>Element that is the only child of parent</td>
<td><code>p:only-child</code></td>
</tr>
<tr class="even">
<td><code>:only-of-type</code></td>
<td>Element is only of its type in parent</td>
<td><code>p:only-of-type</code></td>
</tr>
<tr class="odd">
<td><code>:not(selector)</code></td>
<td>Element that is not the selector</td>
<td><code>:not(p)</code></td>
</tr>
<tr class="even">
<td><code>:empty</code></td>
<td>Element with no children</td>
<td><code>p:empty</code></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="infographic-guide-to-advanced-css-selectors" class="slide level2">
<h2>Infographic Guide to Advanced CSS Selectors</h2>

<img data-src="img/css-sel2.png" class="r-stretch"></section>
<section id="r-examples" class="slide level2">
<h2>R Examples</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">html_elements</span>(page, <span class="st">"p.description"</span>)              <span class="co"># Select all &lt;p&gt; with class 'description'</span></span>
<span id="cb1-2"><a href=""></a><span class="fu">html_element</span>(page, <span class="st">"ul &gt; li:first-child"</span>)         <span class="co"># Select the first &lt;li&gt; inside each &lt;ul&gt;</span></span>
<span id="cb1-3"><a href=""></a><span class="fu">html_elements</span>(page, <span class="st">"h2 ~ p"</span>)                      <span class="co"># All &lt;p&gt; that are siblings after an &lt;h2&gt;</span></span>
<span id="cb1-4"><a href=""></a><span class="fu">html_elements</span>(page, <span class="st">"h1, h2"</span>)                      <span class="co"># All &lt;h1&gt; and &lt;h2&gt; elements</span></span>
<span id="cb1-5"><a href=""></a><span class="fu">html_elements</span>(page, <span class="st">"div.content"</span>)                <span class="co"># &lt;div&gt; with class 'content'</span></span>
<span id="cb1-6"><a href=""></a><span class="fu">html_elements</span>(page, <span class="st">"ul &gt; li:last-child"</span>)          <span class="co"># Last &lt;li&gt; in each &lt;ul&gt;</span></span>
<span id="cb1-7"><a href=""></a><span class="fu">html_elements</span>(page, <span class="st">"table tr:nth-child(odd)"</span>)     <span class="co"># Odd-numbered table rows</span></span>
<span id="cb1-8"><a href=""></a><span class="fu">html_elements</span>(page, <span class="st">"img[src$='.jpg']"</span>)            <span class="co"># Images with source ending in .jpg</span></span>
<span id="cb1-9"><a href=""></a><span class="fu">html_elements</span>(page, <span class="st">"a[href*='contact']"</span>)          <span class="co"># Links that contain 'contact' in href</span></span>
<span id="cb1-10"><a href=""></a><span class="fu">html_elements</span>(page, <span class="st">"div#main .highlight"</span>)         <span class="co"># element with class highlight </span></span>
<span id="cb1-11"><a href=""></a><span class="fu">html_elements</span>(page, <span class="st">"li:only-child"</span>)               <span class="co"># &lt;li&gt; that is the only child of its parent</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="python-examples" class="slide level2">
<h2>Python Examples</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href=""></a>soup.select(<span class="st">"p.description"</span>)                    <span class="co"># All &lt;p&gt; with class 'description'</span></span>
<span id="cb2-2"><a href=""></a>soup.select(<span class="st">"ul &gt; li:first-child"</span>)             <span class="co"># First &lt;li&gt; in each &lt;ul&gt;</span></span>
<span id="cb2-3"><a href=""></a>soup.select(<span class="st">"h2 ~ p"</span>)                          <span class="co"># Sibling &lt;p&gt;s that follow an &lt;h2&gt;</span></span>
<span id="cb2-4"><a href=""></a>soup.select(<span class="st">"h1, h2"</span>)                          <span class="co"># All &lt;h1&gt; and &lt;h2&gt; elements</span></span>
<span id="cb2-5"><a href=""></a>soup.select(<span class="st">"div.content"</span>)                    <span class="co"># &lt;div&gt; with class 'content'</span></span>
<span id="cb2-6"><a href=""></a>soup.select(<span class="st">"ul &gt; li:last-child"</span>)              <span class="co"># Last &lt;li&gt; in each &lt;ul&gt;</span></span>
<span id="cb2-7"><a href=""></a>soup.select(<span class="st">"table tr:nth-child(odd)"</span>)         <span class="co"># Odd-numbered rows in a table</span></span>
<span id="cb2-8"><a href=""></a>soup.select(<span class="st">"img[src$='.jpg']"</span>)                <span class="co"># Images ending in .jpg</span></span>
<span id="cb2-9"><a href=""></a>soup.select(<span class="st">"a[href*='contact']"</span>)              <span class="co"># Links with 'contact' in href</span></span>
<span id="cb2-10"><a href=""></a>soup.select(<span class="st">"div#main .highlight"</span>)             <span class="co"># element with class highlight inside &lt;div id='main'&gt;</span></span>
<span id="cb2-11"><a href=""></a>soup.select(<span class="st">"li:only-child"</span>)                   <span class="co"># &lt;li&gt; that is the only child</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="if-the-selector-looks-confusing">If the selector looks confusing:</h3>
<ul>
<li class="fragment">Try <a href="https://kittygiraudel.github.io/selectors-explained/">Selectors Explained</a></li>
<li class="fragment">Learn with the game: <a href="https://flukeout.github.io/">CSS Diner</a></li>
</ul>
</section>
<section id="starwars-example-in-r" class="slide level2">
<h2>StarWars Example in R</h2>
<p>Let’s extract some date from <a href="https://rvest.tidyverse.org/articles/starwars.html">Star Wars films</a>. The HTML structure looks like:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb3-1"><a href=""></a><span class="dt">&lt;</span><span class="kw">section</span><span class="dt">&gt;</span></span>
<span id="cb3-2"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">h2</span><span class="ot"> data-id</span><span class="op">=</span><span class="st">"1"</span><span class="dt">&gt;</span>The Phantom Menace<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb3-3"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>Released: 1999-05-19<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb3-4"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>Director: <span class="dt">&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"director"</span><span class="dt">&gt;</span>George Lucas<span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb3-5"><a href=""></a>  </span>
<span id="cb3-6"><a href=""></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"crawl"</span><span class="dt">&gt;</span></span>
<span id="cb3-7"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>...<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb3-8"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>...<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb3-9"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>...<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb3-10"><a href=""></a>  <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb3-11"><a href=""></a><span class="dt">&lt;/</span><span class="kw">section</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a><span class="fu">library</span>(rvest)</span>
<span id="cb4-2"><a href=""></a>url <span class="ot">&lt;-</span> <span class="st">"https://rvest.tidyverse.org/articles/starwars.html"</span></span>
<span id="cb4-3"><a href=""></a>html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb4-4"><a href=""></a></span>
<span id="cb4-5"><a href=""></a>section <span class="ot">&lt;-</span> html <span class="sc">|&gt;</span> <span class="fu">html_elements</span>(<span class="st">"section"</span>)</span>
<span id="cb4-6"><a href=""></a>section</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{xml_nodeset (7)}
[1] &lt;section&gt;&lt;h2 data-id="1"&gt;\nThe Phantom Menace\n&lt;/h2&gt;\n&lt;p&gt;\nReleased: 1999 ...
[2] &lt;section&gt;&lt;h2 data-id="2"&gt;\nAttack of the Clones\n&lt;/h2&gt;\n&lt;p&gt;\nReleased: 20 ...
[3] &lt;section&gt;&lt;h2 data-id="3"&gt;\nRevenge of the Sith\n&lt;/h2&gt;\n&lt;p&gt;\nReleased: 200 ...
[4] &lt;section&gt;&lt;h2 data-id="4"&gt;\nA New Hope\n&lt;/h2&gt;\n&lt;p&gt;\nReleased: 1977-05-25\n ...
[5] &lt;section&gt;&lt;h2 data-id="5"&gt;\nThe Empire Strikes Back\n&lt;/h2&gt;\n&lt;p&gt;\nReleased: ...
[6] &lt;section&gt;&lt;h2 data-id="6"&gt;\nReturn of the Jedi\n&lt;/h2&gt;\n&lt;p&gt;\nReleased: 1983 ...
[7] &lt;section&gt;&lt;h2 data-id="7"&gt;\nThe Force Awakens\n&lt;/h2&gt;\n&lt;p&gt;\nReleased: 2015- ...</code></pre>
</div>
</div>
</section>
<section id="starwars-example-in-r-1" class="slide level2">
<h2>StarWars Example in R</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a>section <span class="sc">|&gt;</span> <span class="fu">html_element</span>(<span class="st">"h2"</span>) <span class="sc">|&gt;</span> <span class="fu">html_text2</span>() <span class="co"># html_text() or html_text2(): Content only</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The Phantom Menace"      "Attack of the Clones"   
[3] "Revenge of the Sith"     "A New Hope"             
[5] "The Empire Strikes Back" "Return of the Jedi"     
[7] "The Force Awakens"      </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="co"># All the elements with class = director</span></span>
<span id="cb8-2"><a href=""></a>section <span class="sc">|&gt;</span> <span class="fu">html_element</span>(<span class="st">".director"</span>) <span class="sc">|&gt;</span> <span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "George Lucas"     "George Lucas"     "George Lucas"     "George Lucas"    
[5] "Irvin Kershner"   "Richard Marquand" "J. J. Abrams"    </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="co">#Select the first paragraph inside the crawl block</span></span>
<span id="cb10-2"><a href=""></a>section <span class="sc">|&gt;</span> <span class="fu">html_element</span>(<span class="st">"div.crawl p:first-child"</span>) <span class="sc">|&gt;</span> <span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Turmoil has engulfed the Galactic Republic. The taxation of trade routes to outlying star systems is in dispute."                                                                                                                                                                                                                                                                                                                                                                                              
[2] "There is unrest in the Galactic Senate. Several thousand solar systems have declared their intentions to leave the Republic."                                                                                                                                                                                                                                                                                                                                                                                  
[3] "War! The Republic is crumbling under attacks by the ruthless Sith Lord, Count Dooku. There are heroes on both sides. Evil is everywhere."                                                                                                                                                                                                                                                                                                                                                                      
[4] "It is a period of civil war. Rebel spaceships, striking from a hidden base, have won their first victory against the evil Galactic Empire."                                                                                                                                                                                                                                                                                                                                                                    
[5] "It is a dark time for the Rebellion. Although the Death Star has been destroyed, Imperial troops have driven the Rebel forces from their hidden base and pursued them across the galaxy."                                                                                                                                                                                                                                                                                                                      
[6] "Luke Skywalker has returned to his home planet of Tatooine in an attempt to rescue his friend Han Solo from the clutches of the vile gangster Jabba the Hutt."                                                                                                                                                                                                                                                                                                                                                 
[7] "Luke Skywalker has vanished. In his absence, the sinister FIRST ORDER has risen from the ashes of the Empire and will not rest until Skywalker, the last Jedi, has been destroyed. With the support of the REPUBLIC, General Leia Organa leads a brave RESISTANCE. She is desperate to find her brother Luke and gain his help in restoring peace and justice to the galaxy. Leia has sent her most daring pilot on a secret mission to Jakku, where an old ally has discovered a clue to Luke’s whereabouts…."</code></pre>
</div>
</div>
</section>
<section id="starwars-example-in-r-2" class="slide level2">
<h2>StarWars Example in R</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="co">#Select the last paragraph inside the crawl block</span></span>
<span id="cb12-2"><a href=""></a>section <span class="sc">|&gt;</span> <span class="fu">html_element</span>(<span class="st">"div.crawl p:last-child"</span>) <span class="sc">|&gt;</span> <span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "While the Congress of the Republic endlessly debates this alarming chain of events, the Supreme Chancellor has secretly dispatched two Jedi Knights, the guardians of peace and justice in the galaxy, to settle the conflict…."                                                                                                                                                                                                                                                                               
[2] "Senator Amidala, the former Queen of Naboo, is returning to the Galactic Senate to vote on the critical issue of creating an ARMY OF THE REPUBLIC to assist the overwhelmed Jedi…."                                                                                                                                                                                                                                                                                                                            
[3] "As the Separatist Droid Army attempts to flee the besieged capital with their valuable hostage, two Jedi Knights lead a desperate mission to rescue the captive Chancellor…."                                                                                                                                                                                                                                                                                                                                  
[4] "Pursued by the Empire’s sinister agents, Princess Leia races home aboard her starship, custodian of the stolen plans that can save her people and restore freedom to the galaxy…."                                                                                                                                                                                                                                                                                                                             
[5] "The evil lord Darth Vader, obsessed with finding young Skywalker, has dispatched thousands of remote probes into the far reaches of space…."                                                                                                                                                                                                                                                                                                                                                                   
[6] "When completed, this ultimate weapon will spell certain doom for the small band of rebels struggling to restore freedom to the galaxy…"                                                                                                                                                                                                                                                                                                                                                                        
[7] "Luke Skywalker has vanished. In his absence, the sinister FIRST ORDER has risen from the ashes of the Empire and will not rest until Skywalker, the last Jedi, has been destroyed. With the support of the REPUBLIC, General Leia Organa leads a brave RESISTANCE. She is desperate to find her brother Luke and gain his help in restoring peace and justice to the galaxy. Leia has sent her most daring pilot on a secret mission to Jakku, where an old ally has discovered a clue to Luke’s whereabouts…."</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="co">#Select the last paragraph inside the crawl block</span></span>
<span id="cb14-2"><a href=""></a>section <span class="sc">|&gt;</span> <span class="fu">html_element</span>(<span class="st">"p"</span>) <span class="sc">|&gt;</span> <span class="fu">html_text2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Released: 1999-05-19" "Released: 2002-05-16" "Released: 2005-05-19"
[4] "Released: 1977-05-25" "Released: 1980-05-17" "Released: 1983-05-25"
[7] "Released: 2015-12-11"</code></pre>
</div>
</div>
</section>
<section id="starwars-example-in-r-3" class="slide level2">
<h2>StarWars Example in R</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb16-2"><a href=""></a><span class="fu">tibble</span>(</span>
<span id="cb16-3"><a href=""></a>  <span class="at">title =</span> section <span class="sc">|&gt;</span> </span>
<span id="cb16-4"><a href=""></a>    <span class="fu">html_element</span>(<span class="st">"h2"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-5"><a href=""></a>    <span class="fu">html_text2</span>(),</span>
<span id="cb16-6"><a href=""></a>  <span class="at">released =</span> section <span class="sc">|&gt;</span> </span>
<span id="cb16-7"><a href=""></a>    <span class="fu">html_element</span>(<span class="st">"p"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-8"><a href=""></a>    <span class="fu">html_text2</span>() <span class="sc">|&gt;</span> </span>
<span id="cb16-9"><a href=""></a>    <span class="fu">str_remove</span>(<span class="st">"Released: "</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-10"><a href=""></a>    <span class="fu">parse_date</span>(),</span>
<span id="cb16-11"><a href=""></a>  <span class="at">director =</span> section <span class="sc">|&gt;</span> </span>
<span id="cb16-12"><a href=""></a>    <span class="fu">html_element</span>(<span class="st">".director"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-13"><a href=""></a>    <span class="fu">html_text2</span>(),</span>
<span id="cb16-14"><a href=""></a>  <span class="at">intro =</span> section <span class="sc">|&gt;</span> </span>
<span id="cb16-15"><a href=""></a>    <span class="fu">html_element</span>(<span class="st">".crawl"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-16"><a href=""></a>    <span class="fu">html_text2</span>()</span>
<span id="cb16-17"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  title                   released   director         intro                     
  &lt;chr&gt;                   &lt;date&gt;     &lt;chr&gt;            &lt;chr&gt;                     
1 The Phantom Menace      1999-05-19 George Lucas     "Turmoil has engulfed the…
2 Attack of the Clones    2002-05-16 George Lucas     "There is unrest in the G…
3 Revenge of the Sith     2005-05-19 George Lucas     "War! The Republic is cru…
4 A New Hope              1977-05-25 George Lucas     "It is a period of civil …
5 The Empire Strikes Back 1980-05-17 Irvin Kershner   "It is a dark time for th…
6 Return of the Jedi      1983-05-25 Richard Marquand "Luke Skywalker has retur…
7 The Force Awakens       2015-12-11 J. J. Abrams     "Luke Skywalker has vanis…</code></pre>
</div>
</div>
</section>
<section id="starwars-example-in-python" class="slide level2">
<h2>StarWars Example in Python</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href=""></a><span class="im">import</span> requests</span>
<span id="cb18-2"><a href=""></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb18-3"><a href=""></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb18-4"><a href=""></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb18-5"><a href=""></a></span>
<span id="cb18-6"><a href=""></a></span>
<span id="cb18-7"><a href=""></a>url <span class="op">=</span> <span class="st">"https://rvest.tidyverse.org/articles/starwars.html"</span></span>
<span id="cb18-8"><a href=""></a>response <span class="op">=</span> requests.get(url)</span>
<span id="cb18-9"><a href=""></a>soup <span class="op">=</span> BeautifulSoup(response.text, <span class="st">"html.parser"</span>)</span>
<span id="cb18-10"><a href=""></a>sections <span class="op">=</span> soup.select(<span class="st">"section"</span>)</span>
<span id="cb18-11"><a href=""></a></span>
<span id="cb18-12"><a href=""></a>data <span class="op">=</span> []</span>
<span id="cb18-13"><a href=""></a></span>
<span id="cb18-14"><a href=""></a><span class="cf">for</span> sec <span class="kw">in</span> sections:</span>
<span id="cb18-15"><a href=""></a>    title <span class="op">=</span> sec.select_one(<span class="st">"h2"</span>).get_text(strip<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb18-16"><a href=""></a>    released_raw <span class="op">=</span> sec.select_one(<span class="st">"p"</span>).get_text(strip<span class="op">=</span><span class="va">True</span>).replace(<span class="st">"Released: "</span>, <span class="st">""</span>)</span>
<span id="cb18-17"><a href=""></a>    released <span class="op">=</span> pd.to_datetime(released_raw)</span>
<span id="cb18-18"><a href=""></a>    director <span class="op">=</span> sec.select_one(<span class="st">".director"</span>).get_text(strip<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb18-19"><a href=""></a>    intro <span class="op">=</span> sec.select_one(<span class="st">".crawl"</span>).get_text(strip<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb18-20"><a href=""></a>    </span>
<span id="cb18-21"><a href=""></a>    data.append({</span>
<span id="cb18-22"><a href=""></a>        <span class="st">"title"</span>: title,</span>
<span id="cb18-23"><a href=""></a>        <span class="st">"released"</span>: released,</span>
<span id="cb18-24"><a href=""></a>        <span class="st">"director"</span>: director,</span>
<span id="cb18-25"><a href=""></a>        <span class="st">"intro"</span>: intro</span>
<span id="cb18-26"><a href=""></a>    })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="starwars-example-in-python-1" class="slide level2">
<h2>StarWars Example in Python</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href=""></a>df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb19-2"><a href=""></a><span class="bu">print</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     title  ...                                              intro
0       The Phantom Menace  ...  Turmoil has engulfed the Galactic Republic. Th...
1     Attack of the Clones  ...  There is unrest in the Galactic Senate. Severa...
2      Revenge of the Sith  ...  War! The Republic is crumbling under attacks b...
3               A New Hope  ...  It is a period of civil war. Rebel spaceships,...
4  The Empire Strikes Back  ...  It is a dark time for the Rebellion. Although ...
5       Return of the Jedi  ...  Luke Skywalker has returned to his home planet...
6        The Force Awakens  ...  Luke Skywalker has vanished. In his absence, t...

[7 rows x 4 columns]</code></pre>
</div>
</div>
</section>
<section id="regular-expressions-regex" class="slide level2">
<h2>Regular Expressions (regex)</h2>
<p>Imagine you’re scraping a job board and extract text like:</p>
<pre><code>Apply now! Contact: careers@example.com or jobs@tech.org by 2024-09-01</code></pre>
<p>With regex, you can extract:</p>
<ul>
<li class="fragment">Emails: <code>\w+@\w+\.\w+</code></li>
<li class="fragment">Dates: <code>\d{4}-\d{2}-\d{2}</code></li>
</ul>
<p>This turns unstructured blobs into usable data fields!</p>
</section>
<section id="regular-expressions-regex-1" class="slide level2">
<h2>Regular Expressions (regex)</h2>
<blockquote>
<p>Regular expressions (or <strong>regex</strong>) are a powerful tool for <strong>detecting patterns in text</strong> — like matching names, emails, dates, IDs, and more.</p>
</blockquote>
<h3 id="why-it-matters">Why it matters:</h3>
<ul>
<li class="fragment">Extract structured data from messy text</li>
<li class="fragment">Clean up and transform strings</li>
<li class="fragment">Essential for <strong>web scraping</strong>, <strong>data wrangling</strong>, and <strong>validation</strong></li>
</ul>
</section>
<section id="what-well-cover" class="slide level2">
<h2>What We’ll Cover</h2>
<p>Regular expressions are like a <strong>mini-language</strong> embedded inside your code. We’ll learn:</p>
<ol type="1">
<li class="fragment"><strong>How regex works</strong> with key functions in <code>stringr</code> (R) and <code>re</code> (Python)</li>
<li class="fragment">Core regex syntax:
<ul>
<li class="fragment"><strong>Escaping</strong>: literal vs.&nbsp;special characters</li>
<li class="fragment"><strong>Anchors</strong>: start <code>^</code>, end <code>$</code></li>
<li class="fragment"><strong>Character classes</strong>: <code>[A-Z]</code>, <code>[aeiou]</code></li>
<li class="fragment"><strong>Shorthand classes</strong>: <code>\d</code>, <code>\w</code>, <code>\s</code></li>
<li class="fragment"><strong>Quantifiers</strong>: <code>*</code>, <code>+</code>, <code>{2,}</code></li>
<li class="fragment"><strong>Precedence</strong>: how patterns are grouped and combined</li>
<li class="fragment"><strong>Grouping</strong>: parentheses and backreferences</li>
</ul></li>
</ol>
</section>
<section id="basic-regex-patterns" class="slide level2">
<h2>Basic Regex Patterns</h2>
<ul>
<li class="fragment"><strong>Literal characters</strong> match themselves: <code>a</code> matches “a”, <code>1</code> matches “1”</li>
<li class="fragment"><strong>Metacharacters</strong> are symbols with special meanings:</li>
</ul>
<div style="font-size: 0.8em">
<table class="caption-top">
<colgroup>
<col style="width: 14%">
<col style="width: 41%">
<col style="width: 16%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>Character</th>
<th>Meaning</th>
<th>Example</th>
<th>Matches</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.</code></td>
<td>Any (single) character except newline</td>
<td><code>a.</code></td>
<td>“ab”, “a9”, “a#”</td>
</tr>
<tr class="even">
<td><code>+</code></td>
<td>One or more repetitions</td>
<td><code>a+</code></td>
<td>“a”, “aaa”</td>
</tr>
<tr class="odd">
<td><code>*</code></td>
<td>Zero or more repetitions</td>
<td><code>ba*</code></td>
<td>“b”, “baaa”</td>
</tr>
<tr class="even">
<td><code>?</code></td>
<td>Zero or one</td>
<td><code>ab?</code></td>
<td>“a”, “ab”</td>
</tr>
<tr class="odd">
<td><code>[]</code></td>
<td>Character set</td>
<td><code>[aeiou]</code></td>
<td>Any vowel</td>
</tr>
<tr class="even">
<td><code>\</code></td>
<td>Escape special character</td>
<td><code>\.</code></td>
<td>Matches a literal <code>.</code></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="escaping-characters" class="slide level2">
<h2>Escaping Characters</h2>
<p>Most punctuation characters in regex are <strong>metacharacters</strong>. To match them <strong>literally</strong>, you prefix them with a <strong>backslash <code>\</code></strong>.</p>
<p>However, depending on the <strong>programming language</strong>, you may need to escape the backslash <strong>again</strong>:</p>
<h3 id="general-regex-rule">General Regex Rule</h3>
<ul>
<li class="fragment"><code>\.</code> → matches a literal period</li>
<li class="fragment"><code>\$</code> → matches a literal dollar sign</li>
</ul>
</section>
<section id="escaping-characters-1" class="slide level2">
<h2>Escaping Characters</h2>
<h3 id="in-r">In R</h3>
<ul>
<li class="fragment">Use <strong>double backslashes</strong> in strings:
<ul>
<li class="fragment"><code>\\.</code> becomes <code>\.</code> for the regex engine</li>
<li class="fragment"><code>"\\."</code>, <code>"\\$"</code></li>
</ul></li>
</ul>
<h3 id="in-python">In Python</h3>
<ul>
<li class="fragment">Use <strong>raw strings</strong> to avoid double escaping:
<ul>
<li class="fragment"><code>r"\."</code>, <code>r"\$"</code></li>
</ul></li>
</ul>
<p><strong>Example:</strong> Match “9.99”</p>
<ul>
<li class="fragment">Regex: <code>\.</code> (literal dot)</li>
<li class="fragment">In R: <code>"\\."</code></li>
<li class="fragment">In Python: <code>r"\."</code></li>
</ul>
</section>
<section id="regex-anchors" class="slide level2">
<h2>Regex Anchors</h2>
<p>Anchors match <strong>positions</strong>, not characters.</p>
<ul>
<li class="fragment"><code>^</code> = Start of string<br>
<em>Example:</em> <code>^Hello</code> matches “Hello world”.</li>
<li class="fragment"><code>$</code> = End of string<br>
<em>Example:</em> <code>world$</code> matches “Hello world”.</li>
<li class="fragment"><code>\b</code> = Word boundary<br>
<em>Example:</em> <code>\bcat\b</code> matches “the cat sat” but not “catalog”.</li>
<li class="fragment"><code>\B</code> = Non-word boundary<br>
<em>Example:</em> <code>\Bend\B</code> matches the “end” in “bendable” but not in “legend”. <!-- - `\A` = Start of entire text   --> <!--   *Example:* `\AOnce` matches "Once upon a time" only at the very beginning of the text. --> <!-- - `\Z` = End of entire text (before final newline)   --> <!--   *Example:* `the End\Z` matches "the End" only at the very end of the text. --></li>
</ul>
</section>
<section id="character-classes" class="slide level2">
<h2>Character Classes</h2>
<p>Character classes match <strong>exactly one character</strong> from a defined set:</p>
<ul>
<li class="fragment"><code>[aeiou]</code> → any lowercase vowel</li>
<li class="fragment"><code>[A-Z]</code> → any uppercase letter</li>
<li class="fragment"><code>[0-9]</code> → any digit</li>
<li class="fragment"><code>[A-Za-z]</code> → any ASCII letter</li>
<li class="fragment"><code>[^abc]</code> → any character <strong>except</strong> a, b, or c</li>
</ul>
</section>
<section id="shorthand-character-classes" class="slide level2">
<h2>Shorthand Character Classes</h2>
<p>Shorthand character classes provide convenient abbreviations for common character sets.</p>
<ul>
<li class="fragment"><code>\d</code> = digit (equivalent to <code>[0-9]</code>)</li>
<li class="fragment"><code>\D</code> = non-digit (equivalent to <code>[^0-9]</code>)</li>
<li class="fragment"><code>\w</code> = word character (letters, digits, underscore; equivalent to <code>[A-Za-z0-9_]</code>)</li>
<li class="fragment"><code>\W</code> = non-word character (equivalent to <code>[^A-Za-z0-9_]</code>)</li>
<li class="fragment"><code>\s</code> = whitespace character (space, tab, newline)</li>
<li class="fragment"><code>\S</code> = non-whitespace character (equivalent to <code>[^ \t\r\n]</code>)</li>
</ul>
</section>
<section id="quantifiers" class="slide level2">
<h2>Quantifiers</h2>
<p>Control how many times a character/pattern repeats:</p>
<ul>
<li class="fragment"><code>*</code> → 0 or more</li>
<li class="fragment"><code>+</code> → 1 or more</li>
<li class="fragment"><code>?</code> → 0 or 1</li>
<li class="fragment"><code>{n}</code> → exactly n</li>
<li class="fragment"><code>{n,}</code> → n or more</li>
<li class="fragment"><code>{n,m}</code> → between n and m</li>
</ul>
<p><strong>Example:</strong> <code>a{2,4}</code> matches “aa”, “aaa”, “aaaa”</p>
</section>
<section id="grouping-backreferences" class="slide level2">
<h2>Grouping &amp; Backreferences</h2>
<p>Capture groups, defined with parentheses <code>(...)</code>, allow you to “remember” parts of the match and refer back to them with <strong>backreferences</strong> <code>\1</code>, <code>\2</code>, etc.</p>
<div style="font-size: 0.9em">
<ul>
<li class="fragment"><code>(ha)+</code> matches “ha”, “hahaha”, “hahahaha”, …<br>
(one or more repetitions of “ha”)</li>
<li class="fragment"><code>([aeiou])\1</code> matches <strong>double vowels</strong> like “oo”, “ee”, “aa”<br>
(captures a vowel then matches it again)</li>
<li class="fragment"><code>(\w+)\s+\1</code> matches <strong>repeated words</strong> like “hello hello” or “test test”<br>
(captures a word, whitespace, then the same word)</li>
<li class="fragment"><code>(.)(.)\1\2</code> matches <strong>repeated pairs</strong> such as “abab” or “1212”<br>
(captures two characters, then backreferences both)</li>
<li class="fragment"><code>^(.)\1+$</code> matches strings composed entirely of the <strong>same character</strong>: “aaaa”, “1111”<br>
(anchor, capture first char, then one or more repeats of it)</li>
<li class="fragment"><code>(\d{2})-(\d{2})-\1</code> matches patterns like “12-34-12”<br>
(captures two digits, hyphen, two digits, hyphen, then repeats first two digits)</li>
</ul>
</div>
</section>
<section id="regex-precedence" class="slide level2">
<h2>Regex Precedence</h2>
<h3 id="order-of-operations">Order of Operations:</h3>
<ol type="1">
<li class="fragment"><code>[abc]</code> → character classes evaluated first</li>
<li class="fragment"><code>\d</code>, <code>.</code> → shorthand &amp; metacharacters</li>
<li class="fragment"><code>*</code>, <code>+</code>, <code>{n}</code> → quantifiers apply to preceding item</li>
<li class="fragment"><code>ab|cd</code> → alternation (OR) is applied last</li>
<li class="fragment"><code>( ... )</code> → use parentheses to group and control order</li>
</ol>
</section>
<section id="regex-precedence-1" class="slide level2">
<h2>Regex Precedence</h2>
<h3 id="examples">Examples</h3>
<ul>
<li class="fragment"><code>ab+</code> → matches <code>"a"</code> followed by one or more <code>"b"</code>s<br>
</li>
<li class="fragment"><code>(ab)+</code> → matches <code>"ab"</code>, <code>"abab"</code>, etc.<br>
</li>
<li class="fragment"><code>a|bc+</code> → matches <code>"a"</code> OR, <code>"b"</code> followed by one or more <code>"c"</code>s. Matches <code>"a"</code></li>
<li class="fragment"><code>(a|b)c+</code> → matches <code>"ac"</code>, <code>"bc"</code>, <code>"bcc"</code>, etc. It does not match <code>"a"</code>.</li>
<li class="fragment"><code>ab|cd</code> → matches either <code>"ab"</code> or <code>"cd"</code></li>
</ul>
<p>Use parentheses <code>()</code> to control grouping and clarify intent.</p>
</section>
<section id="suggested-excercise" class="slide level2">
<h2>Suggested Excercise</h2>
<p>Solve the beginner regexp crosswords at <a href="https://regexcrossword.com/challenges/beginner">https://regexcrossword.com/challenges/beginner.</a></p>
</section>
<section id="imdb-top-films-example" class="slide level2">
<h2>IMDB top films Example</h2>
<p>Let’s tackle something a little trickier, extracting the top 250 movies from the internet <a href="https://web.archive.org/web/20220201012049/https://www.imdb.com/chart/top/">movie database</a> (IMDb):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a>url <span class="ot">&lt;-</span> <span class="st">"https://web.archive.org/web/20220201012049/https://www.imdb.com/chart/top/"</span></span>
<span id="cb22-2"><a href=""></a>html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb22-3"><a href=""></a>table <span class="ot">&lt;-</span> html <span class="sc">|&gt;</span> </span>
<span id="cb22-4"><a href=""></a>  <span class="fu">html_element</span>(<span class="st">"table"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-5"><a href=""></a>  <span class="fu">html_table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a>table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 250 × 5
   ``    `Rank &amp; Title`                        `IMDb Rating` `Your Rating` ``   
   &lt;lgl&gt; &lt;chr&gt;                                         &lt;dbl&gt; &lt;chr&gt;         &lt;lgl&gt;
 1 NA    "1.\n      The Shawshank Redemption\…           9.2 "12345678910… NA   
 2 NA    "2.\n      The Godfather\n        (1…           9.1 "12345678910… NA   
 3 NA    "3.\n      The Godfather: Part II\n …           9   "12345678910… NA   
 4 NA    "4.\n      The Dark Knight\n        …           9   "12345678910… NA   
 5 NA    "5.\n      12 Angry Men\n        (19…           8.9 "12345678910… NA   
 6 NA    "6.\n      Schindler's List\n       …           8.9 "12345678910… NA   
 7 NA    "7.\n      The Lord of the Rings: Th…           8.9 "12345678910… NA   
 8 NA    "8.\n      Pulp Fiction\n        (19…           8.8 "12345678910… NA   
 9 NA    "9.\n      The Good, the Bad and the…           8.8 "12345678910… NA   
10 NA    "10.\n      The Lord of the Rings: T…           8.8 "12345678910… NA   
# ℹ 240 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a>table[<span class="dv">1</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  `Rank &amp; Title`                                      
  &lt;chr&gt;                                               
1 "1.\n      The Shawshank Redemption\n        (1994)"</code></pre>
</div>
</div>
</section>
<section id="imdb-top-films-example-1" class="slide level2">
<h2>IMDB top films Example</h2>
<p>Let’s suppose we want to separate <code>Rank &amp; Title</code>, into <code>Rank</code>, <code>Title</code> and <code>Year</code>. We can use the function <code>separate_wider_regex()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a>ratings <span class="ot">&lt;-</span> table <span class="sc">|&gt;</span></span>
<span id="cb27-2"><a href=""></a>  <span class="fu">select</span>(</span>
<span id="cb27-3"><a href=""></a>    <span class="at">rank_title_year =</span> <span class="st">`</span><span class="at">Rank &amp; Title</span><span class="st">`</span>,</span>
<span id="cb27-4"><a href=""></a>    <span class="at">rating =</span> <span class="st">`</span><span class="at">IMDb Rating</span><span class="st">`</span></span>
<span id="cb27-5"><a href=""></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb27-6"><a href=""></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-7"><a href=""></a>    <span class="at">rank_title_year =</span> <span class="fu">str_replace_all</span>(rank_title_year, <span class="st">"</span><span class="sc">\n</span><span class="st"> +"</span>, <span class="st">" "</span>)</span>
<span id="cb27-8"><a href=""></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb27-9"><a href=""></a>  <span class="fu">separate_wider_regex</span>(</span>
<span id="cb27-10"><a href=""></a>    rank_title_year,</span>
<span id="cb27-11"><a href=""></a>    <span class="at">patterns =</span> <span class="fu">c</span>(</span>
<span id="cb27-12"><a href=""></a>      <span class="at">rank =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">. "</span>,</span>
<span id="cb27-13"><a href=""></a>      <span class="at">title =</span> <span class="st">".+"</span>, <span class="st">" +</span><span class="sc">\\</span><span class="st">("</span>,</span>
<span id="cb27-14"><a href=""></a>      <span class="at">year =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">)"</span></span>
<span id="cb27-15"><a href=""></a>    )</span>
<span id="cb27-16"><a href=""></a>  )</span>
<span id="cb27-17"><a href=""></a>ratings[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  rank  title                    year  rating
  &lt;chr&gt; &lt;chr&gt;                    &lt;chr&gt;  &lt;dbl&gt;
1 1     The Shawshank Redemption 1994     9.2
2 2     The Godfather            1972     9.1
3 3     The Godfather: Part II   1974     9  
4 4     The Dark Knight          2008     9  </code></pre>
</div>
</div>
</section>
<section id="imdb-top-films-example-in-python" class="slide level2">
<h2>IMDB top films Example in Python</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href=""></a><span class="im">import</span> requests</span>
<span id="cb29-2"><a href=""></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb29-3"><a href=""></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb29-4"><a href=""></a></span>
<span id="cb29-5"><a href=""></a>url <span class="op">=</span> <span class="st">"https://web.archive.org/web/20220201012049/https://www.imdb.com/chart/top/"</span></span>
<span id="cb29-6"><a href=""></a>resp <span class="op">=</span> requests.get(url)</span>
<span id="cb29-7"><a href=""></a>soup <span class="op">=</span> BeautifulSoup(resp.text, <span class="st">"html.parser"</span>)</span>
<span id="cb29-8"><a href=""></a></span>
<span id="cb29-9"><a href=""></a>table <span class="op">=</span> soup.find(<span class="st">"table"</span>)</span>
<span id="cb29-10"><a href=""></a>df <span class="op">=</span> pd.read_html(<span class="bu">str</span>(table))[<span class="dv">0</span>]</span>
<span id="cb29-11"><a href=""></a>df <span class="op">=</span> (</span>
<span id="cb29-12"><a href=""></a>  df[[<span class="st">"Rank &amp; Title"</span>, <span class="st">"IMDb Rating"</span>]]</span>
<span id="cb29-13"><a href=""></a>    .rename(columns<span class="op">=</span>{</span>
<span id="cb29-14"><a href=""></a>        <span class="st">"Rank &amp; Title"</span>: <span class="st">"rank_title_year"</span>,</span>
<span id="cb29-15"><a href=""></a>        <span class="st">"IMDb Rating"</span>: <span class="st">"rating"</span>})</span>
<span id="cb29-16"><a href=""></a>)</span>
<span id="cb29-17"><a href=""></a><span class="co">##Replace newline + spaces with a single space</span></span>
<span id="cb29-18"><a href=""></a>df[<span class="st">"rank_title_year"</span>] <span class="op">=</span> df[<span class="st">"rank_title_year"</span>].<span class="bu">str</span>.replace(<span class="vs">r"\n +"</span>, <span class="st">" "</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb29-19"><a href=""></a><span class="co">###Split into rank, title, year via a single regex</span></span>
<span id="cb29-20"><a href=""></a>pattern <span class="op">=</span> <span class="vs">r"(?P&lt;rank&gt;\d+)\.\s(?P&lt;title&gt;.+?)\s+\((?P&lt;year&gt;\d</span><span class="sc">{4}</span><span class="vs">)\)"</span></span>
<span id="cb29-21"><a href=""></a>split_df <span class="op">=</span> df[<span class="st">"rank_title_year"</span>].<span class="bu">str</span>.extract(pattern)</span>
<span id="cb29-22"><a href=""></a></span>
<span id="cb29-23"><a href=""></a>ratings <span class="op">=</span> pd.concat([df.drop(columns<span class="op">=</span><span class="st">"rank_title_year"</span>), split_df], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb29-24"><a href=""></a></span>
<span id="cb29-25"><a href=""></a><span class="bu">print</span>(ratings.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   rating rank                      title  year
0     9.2    1   The Shawshank Redemption  1994
1     9.1    2              The Godfather  1972
2     9.0    3     The Godfather: Part II  1974
3     9.0    4            The Dark Knight  2008
4     8.9    5               12 Angry Men  1957</code></pre>
</div>
</div>
</section>
<section id="the-power-of-bash" class="slide level2">
<h2>The Power of Bash</h2>
<p>Bash is the <strong>shell</strong> language of Unix/Linux systems. It’s essential for:</p>
<ul>
<li class="fragment">Interacting with remote servers via <code>ssh</code></li>
<li class="fragment">Submitting batch jobs on supercomputers (<code>sbatch</code>, <code>qsub</code>)</li>
<li class="fragment">Automating repetitive tasks &amp; pipelines</li>
<li class="fragment">Chaining commands with pipes (<code>|</code>) and redirects (<code>&gt;</code>, <code>&gt;&gt;</code>)</li>
</ul>
</section>
<section id="bash-essentials-cheatsheet" class="slide level2">
<h2>Bash Essentials Cheatsheet</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>ls</code>, <code>cd</code></td>
<td>List files, change directory</td>
</tr>
<tr class="even">
<td><code>cat</code></td>
<td>Print contents</td>
</tr>
<tr class="odd">
<td><code>pwd</code></td>
<td>Print working directory</td>
</tr>
<tr class="even">
<td><code>scp</code>, <code>ssh</code></td>
<td>Secure copy, remote login</td>
</tr>
<tr class="odd">
<td><code>curl</code>, <code>wget</code></td>
<td>Download files from the web</td>
</tr>
<tr class="even">
<td><code>grep</code>, <code>sed</code>, <code>awk</code></td>
<td>Search &amp; process text</td>
</tr>
<tr class="odd">
<td><code>cut</code>, <code>sort</code>, <code>uniq</code></td>
<td>Extract/organize text fields</td>
</tr>
<tr class="even">
<td><code>wc -l</code></td>
<td>Count lines</td>
</tr>
<tr class="odd">
<td><code>head</code>, <code>tail</code></td>
<td>View file start/end</td>
</tr>
<tr class="even">
<td><code>sbatch</code>, <code>qsub</code></td>
<td>Submit batch jobs on HPC</td>
</tr>
</tbody>
</table>
</section>
<section id="references-to-learn-shell-command-line" class="slide level2">
<h2>References to learn shell command line</h2>
<ul>
<li class="fragment"><strong>Required reading: <a href="http://swcarpentry.github.io/shell-novice/">Software Carpentry Shell Novice Lesson</a></strong></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href=""></a><span class="co">###In Bash</span></span>
<span id="cb31-2"><a href=""></a></span>
<span id="cb31-3"><a href=""></a><span class="cf">if</span> <span class="bu">[</span> <span class="ot">!</span> <span class="ot">-f</span> shell-lesson-data.zip <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb31-4"><a href=""></a>  <span class="fu">wget</span> <span class="at">-nc</span> https://swcarpentry.github.io/shell-novice/data/shell-lesson-data.zip</span>
<span id="cb31-5"><a href=""></a><span class="cf">else</span></span>
<span id="cb31-6"><a href=""></a>  <span class="bu">echo</span> <span class="st">"shell-lesson-data.zip already exists, skipping download"</span></span>
<span id="cb31-7"><a href=""></a><span class="cf">fi</span></span>
<span id="cb31-8"><a href=""></a></span>
<span id="cb31-9"><a href=""></a><span class="co"># Unzip only if the target directory isn't there</span></span>
<span id="cb31-10"><a href=""></a><span class="cf">if</span> <span class="bu">[</span> <span class="ot">!</span> <span class="ot">-d</span> shell-lesson-data <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb31-11"><a href=""></a>  <span class="fu">unzip</span> <span class="at">-n</span> shell-lesson-data.zip</span>
<span id="cb31-12"><a href=""></a><span class="cf">else</span></span>
<span id="cb31-13"><a href=""></a>  <span class="bu">echo</span> <span class="st">"shell-lesson-data/ already exists, skipping unzip"</span></span>
<span id="cb31-14"><a href=""></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shell-lesson-data.zip already exists, skipping download
shell-lesson-data/ already exists, skipping unzip</code></pre>
</div>
</div>
<ul>
<li class="fragment">Look for explanation of any bash command: <a href="https://explainshell.com/">Explain Shell</a></li>
</ul>
<!-- ```bash -->
<!-- curl https://example.com/data.csv -o data.csv -->
<!-- head -n 10 data.csv -->
<!-- cut -d, -f1 data.csv | grep 'CA' -->
<!-- ``` -->
</section>
<section id="live-demo" class="slide level2">
<h2>Live demo</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href=""></a><span class="co">###In Bash</span></span>
<span id="cb33-2"><a href=""></a></span>
<span id="cb33-3"><a href=""></a></span>
<span id="cb33-4"><a href=""></a><span class="co"># cd shell-lesson-data/exercise-data/alkanes</span></span>
<span id="cb33-5"><a href=""></a><span class="co"># ls *.pdb  ## * any number of characters</span></span>
<span id="cb33-6"><a href=""></a><span class="co"># ?ethane.pdb  ## ? single character</span></span>
<span id="cb33-7"><a href=""></a><span class="co">#mkdir file_test</span></span>
<span id="cb33-8"><a href=""></a><span class="co"># mv octane.pdb file_test/octane.pdb</span></span>
<span id="cb33-9"><a href=""></a><span class="co"># cp octane.pdb file_test/octane_copy.pdb</span></span>
<span id="cb33-10"><a href=""></a><span class="co"># nano test.txt  ## Ctrl + o, ctrl + x</span></span>
<span id="cb33-11"><a href=""></a><span class="co"># rm test.txt</span></span>
<span id="cb33-12"><a href=""></a><span class="co"># rm -i test_txt</span></span>
<span id="cb33-13"><a href=""></a><span class="co"># rm -r -i file_test</span></span>
<span id="cb33-14"><a href=""></a><span class="co"># echo "Hello!"</span></span>
<span id="cb33-15"><a href=""></a><span class="co"># echo "This is a test" &gt; test.txt</span></span>
<span id="cb33-16"><a href=""></a><span class="co"># echo "This is a second line" &gt;&gt; test.txt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="anatomy-of-shell-commands" class="slide level2">
<h2>Anatomy of shell commands</h2>
<p>Here is a simple shell command:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href=""></a><span class="fu">cat</span> <span class="at">--help</span> <span class="co">## most shell commands have built-in help</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a href=""></a><span class="fu">head</span> <span class="at">--help</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol type="1">
<li class="fragment"><p><code>cat</code>: program name</p></li>
<li class="fragment"><p><code>[OPTION]</code>: controls program behavior</p></li>
<li class="fragment"><p><code>[FILE]</code>: specify file to read from or standard input</p></li>
</ol>
</section>
<section id="example-downloading-files" class="slide level2">
<h2>Example: Downloading Files</h2>
<ul>
<li class="fragment"><p>URLs of files are directly visible (e.g., Github)</p></li>
<li class="fragment"><p><code>wget</code> is simple and effective download tool</p></li>
<li class="fragment"><p>Example: https://github.com/fivethirtyeight/data</p></li>
<li class="fragment"><p>“Raw” button is the URL for actual file</p></li>
<li class="fragment"><p>Take the candy ratings data: https://github.com/fivethirtyeight/data/tree/master/candy-power-ranking</p></li>
<li class="fragment"><p><code>wget</code> can be used to download files to course jupyterhub</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><a href=""></a></span>
<span id="cb36-2"><a href=""></a><span class="co"># only download if missing</span></span>
<span id="cb36-3"><a href=""></a><span class="cf">if</span> <span class="bu">[</span> <span class="ot">!</span> <span class="ot">-f</span> candy-data.csv <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb36-4"><a href=""></a>  <span class="fu">wget</span> <span class="at">-nc</span> https://raw.githubusercontent.com/fivethirtyeight/data/master/candy-power-ranking/candy-data.csv <span class="dt">\</span></span>
<span id="cb36-5"><a href=""></a>    <span class="at">-O</span> candy-data.csv</span>
<span id="cb36-6"><a href=""></a><span class="cf">else</span></span>
<span id="cb36-7"><a href=""></a>  <span class="bu">echo</span> <span class="st">"candy-data.csv already exists, skipping download."</span></span>
<span id="cb36-8"><a href=""></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>candy-data.csv already exists, skipping download.</code></pre>
</div>
</div>
</section>
<section id="example-manipulating-data" class="slide level2">
<h2>Example: Manipulating Data</h2>
<ul>
<li class="fragment">Viewing file contents</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb38-1"><a href=""></a><span class="fu">head</span> candy-data.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>competitorname,chocolate,fruity,caramel,peanutyalmondy,nougat,crispedricewafer,hard,bar,pluribus,sugarpercent,pricepercent,winpercent
100 Grand,1,0,1,0,0,1,0,1,0,.73199999,.86000001,66.971725
3 Musketeers,1,0,0,0,1,0,0,1,0,.60399997,.51099998,67.602936
One dime,0,0,0,0,0,0,0,0,0,.011,.116,32.261086
One quarter,0,0,0,0,0,0,0,0,0,.011,.51099998,46.116505
Air Heads,0,1,0,0,0,0,0,0,0,.90600002,.51099998,52.341465
Almond Joy,1,0,0,1,0,0,0,1,0,.465,.76700002,50.347546
Baby Ruth,1,0,1,1,1,0,0,1,0,.60399997,.76700002,56.914547
Boston Baked Beans,0,0,0,1,0,0,0,0,1,.31299999,.51099998,23.417824
Candy Corn,0,0,0,0,0,0,0,0,1,.90600002,.32499999,38.010963</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><a href=""></a><span class="fu">head</span> <span class="at">-n</span> 8 candy-data.csv  <span class="co">## first line is the header</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>competitorname,chocolate,fruity,caramel,peanutyalmondy,nougat,crispedricewafer,hard,bar,pluribus,sugarpercent,pricepercent,winpercent
100 Grand,1,0,1,0,0,1,0,1,0,.73199999,.86000001,66.971725
3 Musketeers,1,0,0,0,1,0,0,1,0,.60399997,.51099998,67.602936
One dime,0,0,0,0,0,0,0,0,0,.011,.116,32.261086
One quarter,0,0,0,0,0,0,0,0,0,.011,.51099998,46.116505
Air Heads,0,1,0,0,0,0,0,0,0,.90600002,.51099998,52.341465
Almond Joy,1,0,0,1,0,0,0,1,0,.465,.76700002,50.347546
Baby Ruth,1,0,1,1,1,0,0,1,0,.60399997,.76700002,56.914547</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb42-1"><a href=""></a><span class="fu">tail</span> <span class="at">-n5</span> candy-data.csv </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Twizzlers,0,1,0,0,0,0,0,0,0,.22,.116,45.466282
Warheads,0,1,0,0,0,0,1,0,0,.093000002,.116,39.011898
Welch's Fruit Snacks,0,1,0,0,0,0,0,0,1,.31299999,.31299999,44.375519
Werther's Original Caramel,0,0,1,0,0,0,1,0,0,.186,.26699999,41.904308
Whoppers,1,0,0,0,0,1,0,0,1,.87199998,.84799999,49.524113</code></pre>
</div>
</div>
</section>
<section id="example-manipulating-data-1" class="slide level2">
<h2>Example: Manipulating Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a href=""></a><span class="fu">wc</span> <span class="at">-w</span> candy-data.csv  <span class="co">##word count</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     188 candy-data.csv</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a href=""></a><span class="fu">wc</span> <span class="at">-c</span> candy-data.csv      <span class="co">## counts lines in text file</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    5193 candy-data.csv</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a href=""></a><span class="fu">cut</span> <span class="at">-d</span><span class="st">','</span> <span class="at">-f</span> 1-4 candy-data.csv    <span class="co">## prints columns of delimited by commas text</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>competitorname,chocolate,fruity,caramel
100 Grand,1,0,1
3 Musketeers,1,0,0
One dime,0,0,0
One quarter,0,0,0
Air Heads,0,1,0
Almond Joy,1,0,0
Baby Ruth,1,0,1
Boston Baked Beans,0,0,0
Candy Corn,0,0,0
Caramel Apple Pops,0,1,1
Charleston Chew,1,0,0
Chewey Lemonhead Fruit Mix,0,1,0
Chiclets,0,1,0
Dots,0,1,0
Dum Dums,0,1,0
Fruit Chews,0,1,0
Fun Dip,0,1,0
Gobstopper,0,1,0
Haribo Gold Bears,0,1,0
Haribo Happy Cola,0,0,0
Haribo Sour Bears,0,1,0
Haribo Twin Snakes,0,1,0
Hershey's Kisses,1,0,0
Hershey's Krackel,1,0,0
Hershey's Milk Chocolate,1,0,0
Hershey's Special Dark,1,0,0
Jawbusters,0,1,0
Junior Mints,1,0,0
Kit Kat,1,0,0
Laffy Taffy,0,1,0
Lemonhead,0,1,0
Lifesavers big ring gummies,0,1,0
Peanut butter M&amp;M's,1,0,0
M&amp;M's,1,0,0
Mike &amp; Ike,0,1,0
Milk Duds,1,0,1
Milky Way,1,0,1
Milky Way Midnight,1,0,1
Milky Way Simply Caramel,1,0,1
Mounds,1,0,0
Mr Good Bar,1,0,0
Nerds,0,1,0
Nestle Butterfinger,1,0,0
Nestle Crunch,1,0,0
Nik L Nip,0,1,0
Now &amp; Later,0,1,0
Payday,0,0,0
Peanut M&amp;Ms,1,0,0
Pixie Sticks,0,0,0
Pop Rocks,0,1,0
Red vines,0,1,0
Reese's Miniatures,1,0,0
Reese's Peanut Butter cup,1,0,0
Reese's pieces,1,0,0
Reese's stuffed with pieces,1,0,0
Ring pop,0,1,0
Rolo,1,0,1
Root Beer Barrels,0,0,0
Runts,0,1,0
Sixlets,1,0,0
Skittles original,0,1,0
Skittles wildberry,0,1,0
Nestle Smarties,1,0,0
Smarties candy,0,1,0
Snickers,1,0,1
Snickers Crisper,1,0,1
Sour Patch Kids,0,1,0
Sour Patch Tricksters,0,1,0
Starburst,0,1,0
Strawberry bon bons,0,1,0
Sugar Babies,0,0,1
Sugar Daddy,0,0,1
Super Bubble,0,1,0
Swedish Fish,0,1,0
Tootsie Pop,1,1,0
Tootsie Roll Juniors,1,0,0
Tootsie Roll Midgies,1,0,0
Tootsie Roll Snack Bars,1,0,0
Trolli Sour Bites,0,1,0
Twix,1,0,1
Twizzlers,0,1,0
Warheads,0,1,0
Welch's Fruit Snacks,0,1,0
Werther's Original Caramel,0,0,1
Whoppers,1,0,0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb50-1"><a href=""></a><span class="fu">grep</span> <span class="st">'Sugar'</span> candy-data.csv      <span class="co">## finds lines with pattern (regular expression)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sugar Babies,0,0,1,0,0,0,0,0,1,.96499997,.76700002,33.43755
Sugar Daddy,0,0,1,0,0,0,0,0,0,.41800001,.32499999,32.230995</code></pre>
</div>
</div>
</section>
<section id="chaining-commands-together" class="slide level2">
<h2>Chaining commands together</h2>
<ul>
<li class="fragment"><p>Commands can be chained together using “pipes”</p></li>
<li class="fragment"><p>Hence, we can make commands such as the following</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb52-1"><a href=""></a><span class="fu">head</span> <span class="at">-n5</span> candy-data.csv <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>One quarter,0,0,0,0,0,0,0,0,0,.011,.51099998,46.116505</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb54-1"><a href=""></a><span class="fu">head</span> <span class="at">-n1</span> candy-data.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>competitorname,chocolate,fruity,caramel,peanutyalmondy,nougat,crispedricewafer,hard,bar,pluribus,sugarpercent,pricepercent,winpercent</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb56-1"><a href=""></a><span class="fu">head</span> <span class="at">-n1</span> candy-data.csv <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/,/\n/g'</span> <span class="co"># stream editor: \n is a special character for new line;g:global sustitution</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>competitorname
chocolate
fruity
caramel
peanutyalmondy
nougat
crispedricewafer
hard
bar
pluribus
sugarpercent
pricepercent
winpercent</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb58-1"><a href=""></a><span class="fu">head</span> <span class="at">-n1</span> candy-data.csv <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/,/\n/g'</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/chocolate/CHOCOLATE/g'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>competitorname
CHOCOLATE
fruity
caramel
peanutyalmondy
nougat
crispedricewafer
hard
bar
pluribus
sugarpercent
pricepercent
winpercent</code></pre>
</div>
</div>
</section>
<section id="example-text-file-download-search-and-manipulation" class="slide level2">
<h2>Example: Text file download, search, and manipulation</h2>
<p>Comands like <code>grep</code>, <code>sed</code> and <code>awk</code> can be used for text processing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb60-1"><a href=""></a><span class="co"># Grab IRS stats page and extract .zip links with sed instead of grep -P</span></span>
<span id="cb60-2"><a href=""></a><span class="fu">wget</span> <span class="at">-q</span> <span class="at">-O</span> <span class="at">-</span> https://www.irs.gov/statistics/soi-tax-stats-individual-income-tax-statistics-zip-code-data-soi <span class="kw">|</span> <span class="dt">\</span></span>
<span id="cb60-3"><a href=""></a>  <span class="fu">sed</span> <span class="st">'s/&lt;a data/\n&lt;a data/g'</span> <span class="kw">|</span> <span class="dt">\</span></span>
<span id="cb60-4"><a href=""></a>  <span class="fu">sed</span> <span class="at">-n</span> <span class="st">'s/.*href="\([^"]*zipcode\.zip\)".*/\1/p'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>https://www.irs.gov/pub/irs-soi/2010zipcode.zip
https://www.irs.gov/pub/irs-soi/2009zipcode.zip
https://www.irs.gov/pub/irs-soi/2008zipcode.zip
https://www.irs.gov/pub/irs-soi/2007zipcode.zip
https://www.irs.gov/pub/irs-soi/2006zipcode.zip
https://www.irs.gov/pub/irs-soi/2005zipcode.zip
https://www.irs.gov/pub/irs-soi/2004zipcode.zip
https://www.irs.gov/pub/irs-soi/2002zipcode.zip
https://www.irs.gov/pub/irs-soi/2001zipcode.zip
https://www.irs.gov/pub/irs-soi/1998zipcode.zip</code></pre>
</div>
</div>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="Lec5-RegEx-Bash_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="Lec5-RegEx-Bash_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="Lec5-RegEx-Bash_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="Lec5-RegEx-Bash_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="Lec5-RegEx-Bash_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="Lec5-RegEx-Bash_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="Lec5-RegEx-Bash_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="Lec5-RegEx-Bash_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="Lec5-RegEx-Bash_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="Lec5-RegEx-Bash_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>